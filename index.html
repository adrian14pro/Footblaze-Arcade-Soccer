<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Footblaze FC Mobile</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<style>
html,body{margin:0;overflow:hidden;background:#0b6623;font-family:sans-serif}
canvas{display:block}

/* UI */
#ui{position:fixed;top:10px;left:50%;transform:translateX(-50%);
color:white;font-size:18px;z-index:5}
#menu,#rotate{
position:fixed;inset:0;display:flex;
align-items:center;justify-content:center;
background:#000;color:white;z-index:10;flex-direction:column}
button{font-size:22px;padding:12px 30px;border-radius:12px;border:none}
#rotate{display:none}
@media (orientation:portrait){#rotate{display:flex}}
</style>
</head>

<body>

<div id="rotate">Rotate device to landscape</div>

<div id="menu">
<h1>âš½ Footblaze FC</h1>
<button id="startBtn">START MATCH</button>
</div>

<div id="ui"></div>
<canvas id="game"></canvas>

<script>
/* ================= CORE ================= */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}
addEventListener("resize",resize);resize();

/* ================= GAME STATE ================= */
const State={MENU:0,PLAY:1,PAUSE:2,HALF:3,END:4};
let gameState=State.MENU;

/* ================= MATCH ================= */
let half=1;
let timeLeft=180;
let scoreBlue=0,scoreRed=0;

/* ================= WORLD ================= */
const pitch={w:3000,h:1800};
let camera={x:0,y:0};

/* ================= ENTITIES ================= */
function Player(x,y,team){
this.x=x;this.y=y;this.team=team;
this.r=12;this.speed=220;
this.stamina=100;this.hasBall=false;
}
Player.prototype.update=function(dt,input){
if(this.team==="blue" && input){
this.x+=input.x*this.speed*dt;
this.y+=input.y*this.speed*dt;
}
};
Player.prototype.draw=function(){
ctx.fillStyle=this.team==="blue"?"#1e90ff":"#ff3333";
ctx.beginPath();
ctx.arc(this.x-camera.x,this.y-camera.y,this.r,0,Math.PI*2);
ctx.fill();
};

/* ================= BALL ================= */
const ball={x:pitch.w/2,y:pitch.h/2,vx:0,vy:0};
function updateBall(dt){
ball.x+=ball.vx*dt;
ball.y+=ball.vy*dt;
ball.vx*=0.98;ball.vy*=0.98;
}

/* ================= TEAMS ================= */
const blue=[],red=[];
for(let i=0;i<11;i++){
blue.push(new Player(600+i*40,400+i*30,"blue"));
red.push(new Player(2200-i*40,400+i*30,"red"));
}

/* ================= INPUT ================= */
let input={x:0,y:0};
addEventListener("keydown",e=>{
if(e.key==="ArrowUp")input.y=-1;
if(e.key==="ArrowDown")input.y=1;
if(e.key==="ArrowLeft")input.x=-1;
if(e.key==="ArrowRight")input.x=1;
});
addEventListener("keyup",()=>input={x:0,y:0});

/* ================= CAMERA ================= */
function updateCamera(){
camera.x=ball.x-canvas.width/2;
camera.y=ball.y-canvas.height/2;
camera.x=Math.max(0,Math.min(camera.x,pitch.w-canvas.width));
camera.y=Math.max(0,Math.min(camera.y,pitch.h-canvas.height));
}

/* ================= MATCH LOGIC ================= */
function updateMatch(dt){
if(gameState!==State.PLAY)return;
timeLeft-=dt;
if(timeLeft<=0){
if(half===1){half=2;timeLeft=180;gameState=State.HALF}
else gameState=State.END;
}
}

/* ================= DRAW ================= */
function drawPitch(){
ctx.fillStyle="#2e8b57";
ctx.fillRect(-camera.x,-camera.y,pitch.w,pitch.h);
ctx.strokeStyle="white";ctx.lineWidth=4;
ctx.beginPath();
ctx.moveTo(pitch.w/2-camera.x,0-camera.y);
ctx.lineTo(pitch.w/2-camera.x,pitch.h-camera.y);
ctx.stroke();
}
function drawUI(){
document.getElementById("ui").innerText=
`Blue ${scoreBlue} - ${scoreRed} Red | Half ${half} | ${Math.ceil(timeLeft)}s`;
}

/* ================= GAME LOOP (FC METHOD) ================= */
let last=0;
function loop(t){
const dt=(t-last)/1000;last=t;

if(gameState===State.PLAY){
updateMatch(dt);
blue[0].update(dt,input);
updateBall(dt);
updateCamera();
}

ctx.clearRect(0,0,canvas.width,canvas.height);
drawPitch();
blue.forEach(p=>p.draw());
red.forEach(p=>p.draw());
ctx.fillStyle="white";
ctx.beginPath();
ctx.arc(ball.x-camera.x,ball.y-camera.y,6,0,Math.PI*2);
ctx.fill();
drawUI();

requestAnimationFrame(loop);
}
loop(0);

/* ================= UI ================= */
document.getElementById("startBtn").onclick=()=>{
document.getElementById("menu").style.display="none";
gameState=State.PLAY;
};
</script>
</body>
</html>

